---
title: 「詳解システム・パフォーマンス第2版」を読んだ
published: 2024-07-13
description: オライリージャパンの「詳解システム・パフォーマンス第2版」を読みました。
tags: [book, network]
draft: true
---

1 章

- パフォーマンスを定量化するための指標として適したものの一つにレイテンシがある
    - 待つために使った時間
    - レイテンシがわかればスピードアップの上限も予測可能
        - 例えば DB クエリでディスク読み出しに 50ms かかっていれば、それをキャッシュすればそれだけの時間向上する
    - ただし、レイテンシは入手できるとは限らない
        - BPF ベースの可観測性ツールにより広い範囲で観測可能になった

2 章
- システムパフォーマンスにおける重要な用語
    - IOPS（I/O Operations Per Second）
        - 1 秒あたりの入出力操作数
    - スループット
        - 1 秒あたりのデータ転送量
    - 応答時間
    - レイテンシ
        - サービスの提供にかかった時間
    - 使用率
    - 飽和度（saturation）
        - リソースがキューイングしたうち、サービスを提供できていない割合
    - ボトルネック
        - システムの性能に限界を与えているリソース
    - ワークロード
        - システムに対する入力、またはシステムにかけられる負荷
    - キャッシュ
        - データを一時的に保存するためのメモリ領域

- メソドロジ
    - x 原因解決の方法を知らないこと
        - 解決するために有効な手段を知らず、知っている方法・やりやすい方法で試してしまう。
    - x ランダム変更
        - 問題がどこにあるか適当に推測して適当に変更すること。時間がかかるばかりでなく、変更を真に理解できない
    - チェックリスト
        - 価値を発揮するが、定期的に更新して新鮮さを保つ必要がある
    - 問題の記述
        - 問題を正確に記述するだけで、指標チェックなどせず解決できることもある
            1. パフォーマンスに問題があると考えた理由
            2. システムは良いパフォーマンスで動いていたことがあったか
            3. システムに最近変化はあったか
            4. 問題はレイテンシ、実行時間で表現可能か
            5. 問題はほかの人にも再現可能か
            6. 環境（ソフトウェア、ハードウェア、バージョン、構成）はどうなっているか
    - 仮説検証
        - 問題の原因を特定するために仮説を立て、それを検証する
    - ツールメソッド
        - 以下の作業を行って実行するツール、見るべき指標、どう解釈すべきかのリストを作成できる。ただし、このリストでわかっていることは限られていることを認識しておく必要あり
            1. 利用可能なツールをリストアップ
            2. ツールから得られる指標をリストアップ
            3. それらの指標をどう解釈するかをリストアップ
    - USE（使用率、飽和度、エラー）に注意